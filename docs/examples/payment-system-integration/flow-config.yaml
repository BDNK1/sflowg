name: payment-system-integration
version: "1.0.0"
description: "Comprehensive test of SFlowG plugin system and flow features"

runtime:
  port: "8080"

# Global properties shared across all flows
# These can be overridden by individual flows or environment variables
properties:
  # Service URLs (environment-specific, use env vars in production)
  paymentProviderURL: ${PAYMENT_PROVIDER_URL:http://localhost:9002/v1/charges}
  notificationServiceURL: ${NOTIFICATION_SERVICE_URL:http://localhost:9000/notify}
  inventoryServiceURL: ${INVENTORY_SERVICE_URL:http://localhost:9001/inventory}

  # Feature flags
  enableNotifications: ${ENABLE_NOTIFICATIONS:true}
  debugMode: ${DEBUG_MODE:false}

plugins:
  - source: http
    config:
      timeout: ${HTTP_TIMEOUT:30s}
      max_retries: ${HTTP_MAX_RETRIES:3}
      debug: ${HTTP_DEBUG:false}
      retry_wait_ms: ${HTTP_RETRY_WAIT:100}

  - source: ./plugins/uuidgen


  - source: ./plugins/payment
    config:
      # Provider configuration
      provider_name: ${PAYMENT_PROVIDER:StripeProvider}
      api_base_url: ${PAYMENT_API_URL:https://api.stripe.com/v1}
      api_key: ${PAYMENT_API_KEY}  # Required, no default

      # Processing settings
      timeout: ${PAYMENT_TIMEOUT:30s}
      max_retries: ${PAYMENT_MAX_RETRIES:3}
      min_amount: ${PAYMENT_MIN_AMOUNT:0.01}
      max_amount: ${PAYMENT_MAX_AMOUNT:999999.99}
      default_currency: ${PAYMENT_CURRENCY:USD}

      # Feature flags
      enable_refunds: ${PAYMENT_ENABLE_REFUNDS:true}
      enable_validation: ${PAYMENT_ENABLE_VALIDATION:true}
      debug_mode: ${PAYMENT_DEBUG:false}
